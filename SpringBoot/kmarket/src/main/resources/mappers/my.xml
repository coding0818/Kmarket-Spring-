<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.kmarket.dao.MyDAO">
    <select id="selectPoints" resultType="kr.co.kmarket.vo.MyPointVO">
        select * from `km_member_point` where `uid`=#{uid} order by `pointDate` desc limit 5;
    </select>
    <select id="selectReviews" resultType="kr.co.kmarket.vo.MyReviewVO">
        SELECT a.*, b.prodName from `km_product_review` AS a JOIN `km_product` AS b ON a.prodNo=b.prodNo where `uid`=#{uid} order by `rdate` desc limit 5;
    </select>
    <select id="selectOrders" resultType="kr.co.kmarket.vo.MyOrderVO">
        SELECT a.*, b.*, c.prodName, c.company, c.thumb1, c.cate1, c.cate2 FROM `km_product_order_item` AS a JOIN `km_product_order` AS b ON a.ordNo=b.ordNo JOIN `km_product` AS c ON a.prodNo=c.prodNo WHERE b.uid=#{uid} ORDER BY b.`ordDate` DESC LIMIT 5;
    </select>
    <select id="selectCs" resultType="kr.co.kmarket.vo.MyCsVO">
        select * from `km_cs` where `uid`=#{uid} order by `rdate` desc limit 5;
    </select>
    <select id="selectInfo" resultType="kr.co.kmarket.vo.MemberVO">
        select * from `km_member`
    </select>
    <update id="updateOrdStatus">
        UPDATE `km_product_order_item` SET `ordStatus`=3, `ordState`='구매확정' WHERE `prodNo`=#{prodNo} AND `ordNo`=#{ordNo};
    </update>
</mapper>